<app-home-page-header></app-home-page-header>
<main>
  <form [formGroup]="form" (ngSubmit)="addRecipe()">
    <h3 class="form-title">Create recipe</h3>
    <div class="data">
      <label for="title">Title</label>
      <input type="text" formControlName="title" />
    </div>

    <div class="data-box">
      <label>
        Vegetarian:
        <input formControlName="vegetarian" type="checkbox" />
      </label>

      <label>
        Vegan:
        <input formControlName="vegan" type="checkbox" />
      </label>

      <label>
        Gluten Free:
        <input formControlName="glutenFree" type="checkbox" />
      </label>
    </div>

    <div class="data">
      <h3 class="ingredients-title">Ingredients</h3>
      <div class="ingredients-container" formArrayName="ingredients">
        <div
          *ngFor="let ingredient of ingredients.controls; let i = index"
          [formGroupName]="i"
          class="ingredient-item"
        >
          <div>
            <label>
              Name:
              <input formControlName="name" type="text" />
            </label>
            <label>
              Amount:
              <input formControlName="amount" type="number" min="0.1" />
            </label>
            <label>
              Unit:
              <input formControlName="unit" type="text" />
            </label>
          </div>
          <button type="button" class="ingredient-button" (click)="deleteIngredient(i)">
            Delete
          </button>
        </div>
      </div>
      <button type="button" class="ingredient-button" (click)="addIngredient()">
        Add ingredient
      </button>
    </div>

    <div class="data">
      <label>
        Preparation time (minutes)
        <input formControlName="readyInMinutes" type="number" />
      </label>
    </div>

    <div class="data">
      <label> Servings <input formControlName="servings" type="number" /> </label>
    </div>

    <div class="data">
      <label> Instructions <textarea formControlName="instructions"></textarea></label>
    </div>

    <div class="data">
      <label>
        Image (URL)
        <input type="text" formControlName="image" />
      </label>
    </div>

    <div class="data-select">
      <label for="listId">Select a list:</label>
      <select id="listId" formControlName="listId">
        <option *ngFor="let list of commonUser.recipeLists" [value]="list.id">
          {{ list.name }}
        </option>
      </select>
    </div>

    <button type="submit" [disabled]="form.invalid" class="save-button">Save</button>
  </form>
</main>
<footer></footer>
